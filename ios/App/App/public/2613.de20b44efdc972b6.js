"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2613],{997:(f,h,s)=>{s.d(h,{K:()=>e});var g=s(8256),c=s(1407),a=s(6895);let e=(()=>{class r{constructor(_,m){this.router=_,this.location=m,this.loginVal=!1}goToNotifications(){this.router.navigate(["/notifications"])}goBack(){this.location.back()}}return r.\u0275fac=function(_){return new(_||r)(g.LFG(c.F0),g.LFG(a.Ye))},r.\u0275prov=g.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},2613:(f,h,s)=>{s.r(h),s.d(h,{EditProfilePage:()=>M});var g=s(6895),c=s(433),a=s(7173),e=s(8256),r=s(1407),p=s(997),_=s(613),m=s(9953),P=s(8867),v=s(5830);const E=["search"];function T(d,u){if(1&d&&(e.TgZ(0,"ion-item",27),e._uU(1),e.qZA()),2&d){const i=u.$implicit;e.xp6(1),e.hij(" ",i.description," ")}}let M=(()=>{class d{constructor(i,t,o,n,l,y,A){this.router=i,this.user=t,this.nativeGeocoder=o,this.ngZone=n,this.extra=l,this.locationAccuracy=y,this.api=A,this.showPassword=!1,this.GoogleAutocomplete=new google.maps.places.AutocompleteService,this.listishiddenFrom=!0,this.from="",this.locationishidden=!1,this.getPwdType="password"}ngOnInit(){this.getProfile()}getProfile(){this.extra.loadershow(),this.api.sendRequest("users_customers_profile_by_id",{users_customers_id:localStorage.getItem("loggedId")}).subscribe(i=>{console.log("rssss----",i),"success"==i.status?(this.extra.hideLoader(),this.userdetail=i.data,this.firstname=this.userdetail.first_name,this.lastname=this.userdetail.last_name,this.email=this.userdetail.email,this.number=this.userdetail.phone,this.location=this.userdetail.location,this.password=this.userdetail.password,this.latitude=this.userdetail.lattitude,this.longitude=this.userdetail.longitude):(this.extra.hideLoader(),this.extra.presentToast(i.message))})}ngAfterViewInit(){let i=new google.maps.places.Autocomplete(this.searchElementRef.nativeElement);i.addListener("place_changed",()=>{this.ngZone.run(()=>{var t,o,n;let l=i.getPlace();null==l.geometry||(console.log({place:l},null===(t=l.geometry.location)||void 0===t?void 0:t.lat()),this.latitude=null===(o=l.geometry.location)||void 0===o?void 0:o.lat(),this.longitude=null===(n=l.geometry.location)||void 0===n?void 0:n.lng(),this.location=l.formatted_address,console.log(this.latitude+" "+this.longitude),localStorage.setItem("longitude",this.longitude),localStorage.setItem("lattitude",this.latitude))})})}getCurrentLocatiuon(){this.locationAccuracy.canRequest().then(i=>{i&&this.locationAccuracy.request(this.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY).then(()=>{console.log("Request successful"),console.log("getCurrentLocatiuon()"),navigator.geolocation.getCurrentPosition(t=>{console.log(t),this.latitude=t.coords.latitude,this.longitude=t.coords.longitude,this.getAddress(this.latitude,this.longitude)})},t=>console.log("Error requesting location permissions",t))})}getAddress(i,t){console.log("lat======",i),console.log("long======",t),this.nativeGeocoder.reverseGeocode(i,t).then(o=>{console.log("addressss",o[0]),this.location=o[0].thoroughfare+" "+o[0].subLocality+" "+o[0].subAdministrativeArea+" "+o[0].countryName}).catch(o=>console.log(o))}updateProfile(){let i={users_customers_id:localStorage.getItem("loggedId"),first_name:this.firstname,last_name:this.lastname,phone:this.number,location:this.location,longitude:this.longitude,lattitude:this.latitude,notifications:"Yes",profile_pic:this.profilepic};""==this.firstname?this.extra.presentToast("First name required"):""==this.lastname?this.extra.presentToast("last name required"):""==this.number?this.extra.presentToast("Phone number is required"):""==this.location?this.extra.presentToast("location is required"):(this.extra.loadershow(),this.api.sendRequest("update_profile_signup",i).subscribe(t=>{console.log("prfofile response====",t),"success"==t.status?(this.extra.hideLoader(),localStorage.setItem("profileupdate",JSON.stringify(t.data[0])),this.router.navigate(["/profile"])):(this.extra.hideLoader(),this.extra.presentToast(t.message))}))}toggleGetType(i){"pwd"==i&&("password"==this.getPwdType?(this.getPwdType="text",this.showPassword=!0):(this.getPwdType="password",this.showPassword=!1))}pretifyAddress(i){let t=[],o="";for(let n in i)t.push(i[n]);t.reverse();for(let n in t)t[n].length&&(o+=t[n]+", ");return i.slice(0,-2)}}return d.\u0275fac=function(i){return new(i||d)(e.Y36(r.F0),e.Y36(p.K),e.Y36(_.d),e.Y36(e.R0b),e.Y36(m.e),e.Y36(P.E),e.Y36(v.s))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-edit-profile"]],viewQuery:function(i,t){if(1&i&&e.Gf(E,5),2&i){let o;e.iGM(o=e.CRH())&&(t.searchElementRef=o.first)}},standalone:!0,features:[e.jDz],decls:38,vars:9,consts:[[1,"ion-no-border",3,"translucent"],[1,"bg_toolbar"],[1,"header_padding"],[1,"header"],["src","../../assets/images/icons/back_arrow.svg","alt","",3,"click"],[1,"toolbar_heading","clr_heading","sf_pro_display"],[1,"mgl_10"],["src","../../assets/images/icons/bell_icon.svg","alt","",3,"click"],[1,"background_content",3,"fullscreen"],[1,"container"],[1,"right"],["src","../../assets/images/icons/edit_def.svg","alt",""],[1,"input_lbl","clr_heading","sf_pro_display"],["type","text","inputmode","text","placeholder","First Name",1,"sf_pro_display","mgt_10",3,"ngModel","ngModelChange"],[1,"input_lbl","clr_heading","sf_pro_display","mgt_18"],["type","text","inputmode","text","placeholder","Last Name",1,"sf_pro_display","mgt_10",3,"ngModel","ngModelChange"],[1,"mgt_18"],["type","email","inputmode","email","placeholder","username@gmail.com","readonly","",1,"sf_pro_display","mgt_10",3,"ngModel","ngModelChange"],["type","tel","inputmode","tel","placeholder","+41256897646",1,"sf_pro_display","mgt_10",3,"ngModel","ngModelChange"],[1,"input_with_icon","pdr_18"],["type","search","inputmode","search","placeholder","Location",1,"sf_pro_display","c-input",3,"ngModel","ngModelChange"],["search",""],["src","../../assets/images/icons/location_icon.svg","alt","",3,"click"],[2,"padding","0px !important",3,"hidden"],["tappable","","style","--background: black; color: white",4,"ngFor","ngForOf"],[1,"mgt_40"],["expand","block","size","large",1,"btn","sf_pro_display","btn_solid_primary",3,"click"],["tappable","",2,"--background","black","color","white"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"div",2)(3,"div",3)(4,"img",4),e.NdJ("click",function(){return t.user.goBack()}),e.qZA(),e.TgZ(5,"div",5),e._uU(6,"Profile"),e.qZA(),e.TgZ(7,"div",6)(8,"img",7),e.NdJ("click",function(){return t.user.goToNotifications()}),e.qZA()()()()()(),e.TgZ(9,"ion-content",8)(10,"div",9)(11,"div",10),e._UZ(12,"img",11),e.qZA(),e.TgZ(13,"div")(14,"div",12),e._uU(15,"First Name"),e.qZA(),e.TgZ(16,"ion-input",13),e.NdJ("ngModelChange",function(n){return t.firstname=n}),e.qZA(),e.TgZ(17,"div",14),e._uU(18,"Last Name"),e.qZA(),e.TgZ(19,"ion-input",15),e.NdJ("ngModelChange",function(n){return t.lastname=n}),e.qZA(),e.TgZ(20,"div",16)(21,"div",12),e._uU(22,"Email"),e.qZA(),e.TgZ(23,"ion-input",17),e.NdJ("ngModelChange",function(n){return t.email=n}),e.qZA()(),e.TgZ(24,"div",14),e._uU(25,"Phone Number"),e.qZA(),e.TgZ(26,"ion-input",18),e.NdJ("ngModelChange",function(n){return t.number=n}),e.qZA(),e.TgZ(27,"div",14),e._uU(28,"Location"),e.qZA(),e.TgZ(29,"div",19)(30,"input",20,21),e.NdJ("ngModelChange",function(n){return t.location=n}),e.qZA(),e.TgZ(32,"img",22),e.NdJ("click",function(){return t.getCurrentLocatiuon()}),e.qZA()(),e.TgZ(33,"ion-list",23),e.YNc(34,T,2,1,"ion-item",24),e.qZA()(),e.TgZ(35,"div",25)(36,"ion-button",26),e.NdJ("click",function(){return t.updateProfile()}),e._uU(37,"Save Changes"),e.qZA()()()()),2&i&&(e.Q6J("translucent",!0),e.xp6(9),e.Q6J("fullscreen",!0),e.xp6(7),e.Q6J("ngModel",t.firstname),e.xp6(3),e.Q6J("ngModel",t.lastname),e.xp6(4),e.Q6J("ngModel",t.email),e.xp6(3),e.Q6J("ngModel",t.number),e.xp6(4),e.Q6J("ngModel",t.location),e.xp6(3),e.Q6J("hidden",t.listishiddenFrom),e.xp6(1),e.Q6J("ngForOf",t.autocompleteItems))},dependencies:[a.Pc,a.YG,a.W2,a.Gu,a.pK,a.Ie,a.q_,a.sr,a.j9,g.ez,g.sg,c.u5,c.Fj,c.JJ,c.On],styles:[".container[_ngcontent-%COMP%]{padding:12px 22px 0;margin-bottom:25px}.c-input[_ngcontent-%COMP%]{border:none;background:none;box-shadow:none;height:50px;width:100%;padding-left:15px;outline:none;color:#404142}"]}),d})()}}]);