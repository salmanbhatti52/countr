"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2613],{2613:(E,m,s)=>{s.r(m),s.d(m,{EditProfilePage:()=>M});var g=s(6895),d=s(433),l=s(7173),e=s(8256),_=s(1407),c=s(997),r=s(613),a=s(9953),u=s(4690),f=s(8867),T=s(5830);const v=["search"];function A(p,P){if(1&p&&(e.TgZ(0,"ion-item",27),e._uU(1),e.qZA()),2&p){const t=P.$implicit;e.xp6(1),e.hij(" ",t.description," ")}}let M=(()=>{class p{constructor(t,i,o,n,h,C,O,y){this.router=t,this.user=i,this.nativeGeocoder=o,this.ngZone=n,this.extra=h,this.androidPermissions=C,this.locationAccuracy=O,this.api=y,this.showPassword=!1,this.GoogleAutocomplete=new google.maps.places.AutocompleteService,this.listishiddenFrom=!0,this.from="",this.locationishidden=!1,this.getPwdType="password"}ngOnInit(){this.getProfile()}getProfile(){this.extra.loadershow(),this.api.sendRequest("users_customers_profile_by_id",{users_customers_id:localStorage.getItem("loggedId")}).subscribe(t=>{console.log("rssss----",t),"success"==t.status?(this.extra.hideLoader(),this.userdetail=t.data,this.firstname=this.userdetail.first_name,this.lastname=this.userdetail.last_name,this.email=this.userdetail.email,this.number=this.userdetail.phone,this.location=this.userdetail.location,this.password=this.userdetail.password,this.latitude=this.userdetail.lattitude,this.longitude=this.userdetail.longitude):(this.extra.hideLoader(),this.extra.presentToast(t.message))})}ngAfterViewInit(){let t=new google.maps.places.Autocomplete(this.searchElementRef.nativeElement);t.addListener("place_changed",()=>{this.ngZone.run(()=>{var i,o,n;let h=t.getPlace();null==h.geometry||(console.log({place:h},null===(i=h.geometry.location)||void 0===i?void 0:i.lat()),this.latitude=null===(o=h.geometry.location)||void 0===o?void 0:o.lat(),this.longitude=null===(n=h.geometry.location)||void 0===n?void 0:n.lng(),this.location=h.formatted_address,console.log(this.latitude+" "+this.longitude),localStorage.setItem("longitude",this.longitude),localStorage.setItem("lattitude",this.latitude))})})}getCurrentLocatiuon(){this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION).then(t=>{t.hasPermission?this.requestToSwitchOnGPS():this.askGPSPermission()},t=>{alert(t)})}askGPSPermission(){this.locationAccuracy.canRequest().then(t=>{t||this.androidPermissions.requestPermission(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION).then(()=>{this.requestToSwitchOnGPS()},i=>{alert(i)})})}requestToSwitchOnGPS(){this.locationAccuracy.request(this.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY).then(()=>{navigator.geolocation.getCurrentPosition(t=>{console.log(t),this.latitude=t.coords.latitude,this.longitude=t.coords.longitude,this.getAddress(this.latitude,this.longitude)})},t=>alert(JSON.stringify(t)))}getAddress(t,i){console.log("lat======",t),console.log("long======",i),this.nativeGeocoder.reverseGeocode(t,i).then(o=>{console.log("addressss",o[0]),this.location=o[0].thoroughfare+" "+o[0].subLocality+" "+o[0].subAdministrativeArea+" "+o[0].countryName}).catch(o=>console.log(o))}updateProfile(){let t={users_customers_id:localStorage.getItem("loggedId"),first_name:this.firstname,last_name:this.lastname,phone:this.number,location:this.location,longitude:this.longitude,lattitude:this.latitude,notifications:"Yes",profile_pic:this.profilepic};""==this.firstname?this.extra.presentToast("First name required"):""==this.lastname?this.extra.presentToast("last name required"):""==this.number?this.extra.presentToast("Phone number is required"):""==this.location?this.extra.presentToast("location is required"):(this.extra.loadershow(),this.api.sendRequest("update_profile_signup",t).subscribe(i=>{console.log("prfofile response====",i),"success"==i.status?(this.extra.hideLoader(),localStorage.setItem("profileupdate",JSON.stringify(i.data[0])),this.router.navigate(["/profile"])):(this.extra.hideLoader(),this.extra.presentToast(i.message))}))}toggleGetType(t){"pwd"==t&&("password"==this.getPwdType?(this.getPwdType="text",this.showPassword=!0):(this.getPwdType="password",this.showPassword=!1))}pretifyAddress(t){let i=[],o="";for(let n in t)i.push(t[n]);i.reverse();for(let n in i)i[n].length&&(o+=i[n]+", ");return t.slice(0,-2)}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(_.F0),e.Y36(c.K),e.Y36(r.d),e.Y36(e.R0b),e.Y36(a.e),e.Y36(u.r),e.Y36(f.E),e.Y36(T.s))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-edit-profile"]],viewQuery:function(t,i){if(1&t&&e.Gf(v,5),2&t){let o;e.iGM(o=e.CRH())&&(i.searchElementRef=o.first)}},standalone:!0,features:[e.jDz],decls:38,vars:9,consts:[[1,"ion-no-border",3,"translucent"],[1,"bg_toolbar"],[1,"header_padding"],[1,"header"],["src","../../assets/images/icons/back_arrow.svg","alt","",3,"click"],[1,"toolbar_heading","clr_heading","sf_pro_display"],[1,"mgl_10"],["src","../../assets/images/icons/bell_icon.svg","alt","",3,"click"],[1,"background_content",3,"fullscreen"],[1,"container"],[1,"right"],["src","../../assets/images/icons/edit_def.svg","alt",""],[1,"input_lbl","clr_heading","sf_pro_display"],["type","text","inputmode","text","placeholder","First Name",1,"sf_pro_display","mgt_10",3,"ngModel","ngModelChange"],[1,"input_lbl","clr_heading","sf_pro_display","mgt_18"],["type","text","inputmode","text","placeholder","Last Name",1,"sf_pro_display","mgt_10",3,"ngModel","ngModelChange"],[1,"mgt_18"],["type","email","inputmode","email","placeholder","username@gmail.com","readonly","",1,"sf_pro_display","mgt_10",3,"ngModel","ngModelChange"],["type","tel","inputmode","tel","placeholder","+41256897646",1,"sf_pro_display","mgt_10",3,"ngModel","ngModelChange"],[1,"input_with_icon","pdr_18"],["type","search","inputmode","search","placeholder","Location","aria-label","search",1,"sf_pro_display","c-input",3,"ngModel","ngModelChange"],["search",""],["src","../../assets/images/icons/location_icon.svg","alt","",3,"click"],[2,"padding","0px !important",3,"hidden"],["tappable","","style","--background: black; color: white",4,"ngFor","ngForOf"],[1,"mgt_40"],["expand","block","size","large",1,"btn","sf_pro_display","btn_solid_primary",3,"click"],["tappable","",2,"--background","black","color","white"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"div",2)(3,"div",3)(4,"img",4),e.NdJ("click",function(){return i.user.goBack()}),e.qZA(),e.TgZ(5,"div",5),e._uU(6,"Profile"),e.qZA(),e.TgZ(7,"div",6)(8,"img",7),e.NdJ("click",function(){return i.user.goToNotifications()}),e.qZA()()()()()(),e.TgZ(9,"ion-content",8)(10,"div",9)(11,"div",10),e._UZ(12,"img",11),e.qZA(),e.TgZ(13,"div")(14,"div",12),e._uU(15,"First Name"),e.qZA(),e.TgZ(16,"ion-input",13),e.NdJ("ngModelChange",function(n){return i.firstname=n}),e.qZA(),e.TgZ(17,"div",14),e._uU(18,"Last Name"),e.qZA(),e.TgZ(19,"ion-input",15),e.NdJ("ngModelChange",function(n){return i.lastname=n}),e.qZA(),e.TgZ(20,"div",16)(21,"div",12),e._uU(22,"Email"),e.qZA(),e.TgZ(23,"ion-input",17),e.NdJ("ngModelChange",function(n){return i.email=n}),e.qZA()(),e.TgZ(24,"div",14),e._uU(25,"Phone Number"),e.qZA(),e.TgZ(26,"ion-input",18),e.NdJ("ngModelChange",function(n){return i.number=n}),e.qZA(),e.TgZ(27,"div",14),e._uU(28,"Location"),e.qZA(),e.TgZ(29,"div",19)(30,"input",20,21),e.NdJ("ngModelChange",function(n){return i.location=n}),e.qZA(),e.TgZ(32,"img",22),e.NdJ("click",function(){return i.getCurrentLocatiuon()}),e.qZA()(),e.TgZ(33,"ion-list",23),e.YNc(34,A,2,1,"ion-item",24),e.qZA()(),e.TgZ(35,"div",25)(36,"ion-button",26),e.NdJ("click",function(){return i.updateProfile()}),e._uU(37,"Save Changes"),e.qZA()()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(9),e.Q6J("fullscreen",!0),e.xp6(7),e.Q6J("ngModel",i.firstname),e.xp6(3),e.Q6J("ngModel",i.lastname),e.xp6(4),e.Q6J("ngModel",i.email),e.xp6(3),e.Q6J("ngModel",i.number),e.xp6(4),e.Q6J("ngModel",i.location),e.xp6(3),e.Q6J("hidden",i.listishiddenFrom),e.xp6(1),e.Q6J("ngForOf",i.autocompleteItems))},dependencies:[l.Pc,l.YG,l.W2,l.Gu,l.pK,l.Ie,l.q_,l.sr,l.j9,g.ez,g.sg,d.u5,d.Fj,d.JJ,d.On],styles:[".container[_ngcontent-%COMP%]{padding:12px 22px 0;margin-bottom:25px}.c-input[_ngcontent-%COMP%]{border:none;background:none;box-shadow:none;height:50px;width:100%;padding-left:15px;outline:none;color:#404142}"]}),p})()},5830:(E,m,s)=>{s.d(m,{s:()=>l});var g=s(529),d=s(8256);let l=(()=>{class e{constructor(c){this.http=c,this.baseURL="https://portal.countr.ai/api"}sendRequest(c,r){let a;return a=new g.WM({"Content-Type":"application/json",Accept:"application/json"}),a.append("Access-Control-Allow-Origin","*"),a.append("Access-Control-Allow-Methods","POST, GET, DELETE, PUT,OPTIONS"),this.http.post(`${this.baseURL}/${c}`,r,{headers:a})}getRequest(c,r){let a;return a=new g.WM({"Content-Type":"application/json",Accept:"application/json"}),a.append("Access-Control-Allow-Origin","*"),a.append("Access-Control-Allow-Methods","POST, GET, DELETE, PUT,OPTIONS"),this.http.get(`${this.baseURL}/${c}`,{headers:a})}}return e.\u0275fac=function(c){return new(c||e)(d.LFG(g.eN))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},9953:(E,m,s)=>{s.d(m,{e:()=>e});var g=s(5861),d=s(8256),l=s(7173);let e=(()=>{class _{constructor(r,a){this.toastCtrl=r,this.loadingCtrl=a}presentToast(r){var a=this;return(0,g.Z)(function*(){return a.toast=!0,yield a.toastCtrl.create({message:r,duration:2e3,position:"bottom"}).then(u=>{u.present().then(()=>{console.log("presented"),a.toast||u.dismiss().then(()=>console.log("abort presenting"))})})})()}loadershow(r){var a=this;return(0,g.Z)(function*(){a.loadingCtrl.create({cssClass:"loadingdiv",message:""}).then(u=>{u.present()})})()}hideLoader(){this.loadingCtrl.dismiss().then(r=>{console.log("Loading dismissed!",r)}).catch(r=>{console.log("error",r)})}}return _.\u0275fac=function(r){return new(r||_)(d.LFG(l.yF),d.LFG(l.HT))},_.\u0275prov=d.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()}}]);