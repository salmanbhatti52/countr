"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3482],{5830:(T,m,i)=>{i.d(m,{s:()=>r});var p=i(529),_=i(8256);let r=(()=>{class e{constructor(c){this.http=c,this.baseURL="https://portal.countr.ai/api"}sendRequest(c,l){let s;return s=new p.WM({"Content-Type":"application/json",Accept:"application/json"}),s.append("Access-Control-Allow-Origin","*"),s.append("Access-Control-Allow-Methods","POST, GET, DELETE, PUT,OPTIONS"),this.http.post(`${this.baseURL}/${c}`,l,{headers:s})}getRequest(c,l){let s;return s=new p.WM({"Content-Type":"application/json",Accept:"application/json"}),s.append("Access-Control-Allow-Origin","*"),s.append("Access-Control-Allow-Methods","POST, GET, DELETE, PUT,OPTIONS"),this.http.get(`${this.baseURL}/${c}`,{headers:s})}}return e.\u0275fac=function(c){return new(c||e)(_.LFG(p.eN))},e.\u0275prov=_.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},9953:(T,m,i)=>{i.d(m,{e:()=>e});var p=i(5861),_=i(8256),r=i(7173);let e=(()=>{class d{constructor(l,s){this.toastCtrl=l,this.loadingCtrl=s}presentToast(l){var s=this;return(0,p.Z)(function*(){return s.toast=!0,yield s.toastCtrl.create({message:l,duration:2e3,position:"bottom"}).then(g=>{g.present().then(()=>{console.log("presented"),s.toast||g.dismiss().then(()=>console.log("abort presenting"))})})})()}loadershow(l){var s=this;return(0,p.Z)(function*(){s.loadingCtrl.create({cssClass:"loadingdiv",message:""}).then(g=>{g.present()})})()}hideLoader(){this.loadingCtrl.dismiss().then(l=>{console.log("Loading dismissed!",l)}).catch(l=>{console.log("error",l)})}}return d.\u0275fac=function(l){return new(l||d)(_.LFG(r.yF),_.LFG(r.HT))},d.\u0275prov=_.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},3482:(T,m,i)=>{i.r(m),i.d(m,{SetupProfilePage:()=>C});var p=i(6895),_=i(433),r=i(7173),e=i(8256),d=i(1407),c=i(613),l=i(4690),s=i(9953),g=i(8867),P=i(5830);const v=["search"];function A(u,f){if(1&u&&(e.TgZ(0,"ion-item",17),e._uU(1),e.qZA()),2&u){const t=f.$implicit;e.xp6(1),e.hij(" ",t.description," ")}}function E(u,f){if(1&u){const t=e.EpF();e.TgZ(0,"ion-content",18)(1,"div",19)(2,"div")(3,"div",20)(4,"img",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancel())}),e.qZA()(),e.TgZ(5,"div",22),e._uU(6,"Allow Location Access"),e.qZA()(),e.TgZ(7,"div",23),e._uU(8,"This app wants to access your location. Data on your dashboard will be based on your current location."),e.qZA(),e.TgZ(9,"div",24)(10,"ion-button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancel())}),e._uU(11,"Skip"),e.qZA(),e.TgZ(12,"ion-button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.getCurrentLocatiuon())}),e._uU(13,"Allow"),e.qZA()()()()}}let C=(()=>{class u{constructor(t,n,o,a,h,M,y){this.router=t,this.nativeGeocoder=n,this.ngZone=o,this.androidPermissions=a,this.extra=h,this.locationAccuracy=M,this.api=y,this.GoogleAutocomplete=new google.maps.places.AutocompleteService,this.listishiddenFrom=!0,this.from="",this.locationishidden=!1,this.firstname="",this.lastname="",this.number="",this.address=""}ngOnInit(){}ngAfterViewInit(){let t=new google.maps.places.Autocomplete(this.searchElementRef.nativeElement);t.addListener("place_changed",()=>{this.ngZone.run(()=>{var n,o,a;let h=t.getPlace();null==h.geometry||(console.log({place:h},null===(n=h.geometry.location)||void 0===n?void 0:n.lat()),this.latitude=null===(o=h.geometry.location)||void 0===o?void 0:o.lat(),this.longitude=null===(a=h.geometry.location)||void 0===a?void 0:a.lng(),this.address=h.formatted_address,console.log(this.latitude+" "+this.longitude),localStorage.setItem("longitude",this.longitude),localStorage.setItem("lattitude",this.latitude))})})}getCurrentLocatiuon(){this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION).then(t=>{t.hasPermission?this.requestToSwitchOnGPS():this.askGPSPermission()},t=>{alert(t)})}askGPSPermission(){this.locationAccuracy.canRequest().then(t=>{t||this.androidPermissions.requestPermission(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION).then(()=>{this.requestToSwitchOnGPS()},n=>{alert(n)})})}requestToSwitchOnGPS(){this.locationAccuracy.request(this.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY).then(()=>{navigator.geolocation.getCurrentPosition(t=>{console.log(t),this.latitude=t.coords.latitude,this.longitude=t.coords.longitude,this.getAddress(this.latitude,this.longitude)})},t=>alert(JSON.stringify(t)))}getAddress(t,n){console.log("lat======",t),console.log("long======",n),this.modal.dismiss(),this.nativeGeocoder.reverseGeocode(t,n).then(o=>{console.log(o[0]),this.address=o[0].thoroughfare+" "+o[0].subLocality+" "+o[0].subAdministrativeArea+" "+o[0].countryName}).catch(o=>console.log(o))}cancel(){this.modal.dismiss(null,"cancel")}onWillDismiss(t){}saveProfile(){let t={users_customers_id:localStorage.getItem("loggedId"),first_name:this.firstname,last_name:this.lastname,phone:this.number,location:this.address,longitude:this.longitude,lattitude:this.latitude,notifications:"Yes",profile_pic:this.profilepic};""==this.firstname?this.extra.presentToast("First name required"):""==this.lastname?this.extra.presentToast("last name required"):""==this.number?this.extra.presentToast("Phone number name required"):""==this.address?this.extra.presentToast("location  required"):(this.extra.loadershow(),this.api.sendRequest("update_profile_signup",t).subscribe(n=>{console.log("prfofile response====",n),"success"==n.status?(this.extra.hideLoader(),localStorage.setItem("profileupdate",JSON.stringify(n.data[0])),this.router.navigate(["/social-links"])):(this.extra.hideLoader(),this.extra.presentToast(n.message))}))}}return u.\u0275fac=function(t){return new(t||u)(e.Y36(d.F0),e.Y36(c.d),e.Y36(e.R0b),e.Y36(l.r),e.Y36(s.e),e.Y36(g.E),e.Y36(P.s))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-setup-profile"]],viewQuery:function(t,n){if(1&t&&(e.Gf(r.ki,5),e.Gf(v,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.modal=o.first),e.iGM(o=e.CRH())&&(n.searchElementRef=o.first)}},standalone:!0,features:[e.jDz],decls:27,vars:7,consts:[[1,"background_content",3,"fullscreen"],[1,"container"],[1,"center","clr_heading","top_heading","sf_pro_display"],[2,"margin-top","20%"],[1,"input_lbl","clr_heading","sf_pro_display"],["type","text","inputmode","text","placeholder","First Name",1,"sf_pro_display","mgt_10",3,"ngModel","ngModelChange"],[1,"input_lbl","clr_heading","sf_pro_display","mgt_18"],["type","text","inputmode","text","placeholder","Last Name",1,"sf_pro_display","mgt_10",3,"ngModel","ngModelChange"],["type","tel","inputmode","tel","placeholder","Phone Number",1,"sf_pro_display","mgt_10",3,"ngModel","ngModelChange"],[1,"input_with_icon","pdr_18"],["type","search","inputmode","search","placeholder","Location",1,"sf_pro_display","c-input",3,"ngModel","keydown.enter","ngModelChange"],["search",""],["id","open-modal","src","../../assets/images/icons/location_icon.svg","alt",""],[3,"hidden"],["tappable","","style","--background: black; color: white",4,"ngFor","ngForOf"],["trigger","open-modal",1,"location_modal",3,"willDismiss"],["expand","block","size","large",1,"btn","sf_pro_display","btn_solid_primary",3,"click"],["tappable","",2,"--background","black","color","white"],[1,"background_content"],[1,"sub_container"],[1,"right"],["src","../../assets/images/icons/close.svg","alt","",3,"click"],[1,"sf_pro_display","font_18_700","center","clr_heading"],[1,"sf_pro_display","font_14_400","center","clr_text"],[1,"flex_center","space_between"],["fill","outline",1,"btn","width_47_per","sf_pro_display","btn_outline_primary",3,"click"],[1,"btn","sf_pro_display","width_47_per","btn_solid_primary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2),e._uU(3,"Setup Profile"),e.qZA(),e.TgZ(4,"div",3)(5,"div",4),e._uU(6,"First Name"),e.qZA(),e.TgZ(7,"ion-input",5),e.NdJ("ngModelChange",function(a){return n.firstname=a}),e.qZA(),e.TgZ(8,"div",6),e._uU(9,"Last Name"),e.qZA(),e.TgZ(10,"ion-input",7),e.NdJ("ngModelChange",function(a){return n.lastname=a}),e.qZA(),e.TgZ(11,"div",6),e._uU(12,"Phone Number"),e.qZA(),e.TgZ(13,"ion-input",8),e.NdJ("ngModelChange",function(a){return n.number=a}),e.qZA(),e.TgZ(14,"div",6),e._uU(15,"Location"),e.qZA(),e.TgZ(16,"div",9)(17,"input",10,11),e.NdJ("keydown.enter",function(a){return a.preventDefault()})("ngModelChange",function(a){return n.from=a}),e.qZA(),e._UZ(19,"img",12),e.qZA(),e.TgZ(20,"ion-list",13),e.YNc(21,A,2,1,"ion-item",14),e.qZA(),e.TgZ(22,"ion-modal",15),e.NdJ("willDismiss",function(a){return n.onWillDismiss(a)}),e.YNc(23,E,14,0,"ng-template"),e.qZA()(),e.TgZ(24,"div")(25,"ion-button",16),e.NdJ("click",function(){return n.saveProfile()}),e._uU(26,"Complete"),e.qZA()()()()),2&t&&(e.Q6J("fullscreen",!0),e.xp6(7),e.Q6J("ngModel",n.firstname),e.xp6(3),e.Q6J("ngModel",n.lastname),e.xp6(3),e.Q6J("ngModel",n.number),e.xp6(4),e.Q6J("ngModel",n.from),e.xp6(3),e.Q6J("hidden",n.listishiddenFrom),e.xp6(1),e.Q6J("ngForOf",n.autocompleteItems))},dependencies:[r.Pc,r.YG,r.W2,r.pK,r.Ie,r.q_,r.ki,r.j9,p.ez,p.sg,_.u5,_.Fj,_.JJ,_.On],styles:[".container[_ngcontent-%COMP%]{width:85%;margin:0% auto}.sub_container[_ngcontent-%COMP%]{padding:14px;height:245px;display:flex;flex-direction:column;justify-content:space-between}.c-input[_ngcontent-%COMP%]{border:none;background:none;box-shadow:none;height:50px;width:100%;padding-left:15px;outline:none;color:#404142}"]}),u})()}}]);