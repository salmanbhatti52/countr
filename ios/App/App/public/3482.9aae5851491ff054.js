"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3482],{3482:(M,d,l)=>{l.r(d),l.d(d,{SetupProfilePage:()=>T});var u=l(6895),c=l(433),s=l(7173),e=l(8256),g=l(1407),p=l(613),m=l(9953),h=l(8867),f=l(5830);const P=["search"];function v(a,_){if(1&a&&(e.TgZ(0,"ion-item",17),e._uU(1),e.qZA()),2&a){const o=_.$implicit;e.xp6(1),e.hij(" ",o.description," ")}}function y(a,_){if(1&a){const o=e.EpF();e.TgZ(0,"ion-content",18)(1,"div",19)(2,"div")(3,"div",20)(4,"img",21),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.cancel())}),e.qZA()(),e.TgZ(5,"div",22),e._uU(6,"Allow Location Access"),e.qZA()(),e.TgZ(7,"div",23),e._uU(8,"This app wants to access your location. Data on your dashboard will be based on your current location."),e.qZA(),e.TgZ(9,"div",24)(10,"ion-button",25),e._uU(11,"Skip"),e.qZA(),e.TgZ(12,"ion-button",26),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.getCurrentLocatiuon())}),e._uU(13,"Allow"),e.qZA()()()()}}let T=(()=>{class a{constructor(o,t,i,n,r,A){this.router=o,this.nativeGeocoder=t,this.ngZone=i,this.extra=n,this.locationAccuracy=r,this.api=A,this.GoogleAutocomplete=new google.maps.places.AutocompleteService,this.listishiddenFrom=!0,this.from="",this.locationishidden=!1,this.firstname="",this.lastname="",this.number="",this.address=""}ngOnInit(){}ngAfterViewInit(){let o=new google.maps.places.Autocomplete(this.searchElementRef.nativeElement);o.addListener("place_changed",()=>{this.ngZone.run(()=>{var t,i,n;let r=o.getPlace();null==r.geometry||(console.log({place:r},null===(t=r.geometry.location)||void 0===t?void 0:t.lat()),this.latitude=null===(i=r.geometry.location)||void 0===i?void 0:i.lat(),this.longitude=null===(n=r.geometry.location)||void 0===n?void 0:n.lng(),this.address=r.formatted_address,console.log(this.latitude+" "+this.longitude),localStorage.setItem("longitude",this.longitude),localStorage.setItem("lattitude",this.latitude))})})}getCurrentLocatiuon(){this.locationAccuracy.canRequest().then(o=>{o&&this.locationAccuracy.request(this.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY).then(()=>{console.log("Request successful"),console.log("getCurrentLocatiuon()"),navigator.geolocation.getCurrentPosition(t=>{this.latitude=t.coords.latitude,this.longitude=t.coords.longitude,this.getAddress(this.latitude,this.longitude)})},t=>console.log("Error requesting location permissions",t))})}getAddress(o,t){console.log("lat======",o),console.log("long======",t),this.modal.dismiss(),this.nativeGeocoder.reverseGeocode(o,t).then(i=>{console.log(i[0]),this.address=i[0].thoroughfare+" "+i[0].subLocality+" "+i[0].subAdministrativeArea+" "+i[0].countryName}).catch(i=>console.log(i))}cancel(){this.modal.dismiss(null,"cancel")}onWillDismiss(o){}saveProfile(){let o={users_customers_id:localStorage.getItem("loggedId"),first_name:this.firstname,last_name:this.lastname,phone:this.number,location:this.address,longitude:this.longitude,lattitude:this.latitude,notifications:"Yes",profile_pic:this.profilepic};""==this.firstname?this.extra.presentToast("First name required"):""==this.lastname?this.extra.presentToast("last name required"):""==this.number?this.extra.presentToast("Phone number name required"):""==this.address?this.extra.presentToast("location  required"):(this.extra.loadershow(),this.api.sendRequest("update_profile_signup",o).subscribe(t=>{console.log("prfofile response====",t),"success"==t.status?(this.extra.hideLoader(),localStorage.setItem("profileupdate",JSON.stringify(t.data[0])),this.router.navigate(["/social-links"])):(this.extra.hideLoader(),this.extra.presentToast(t.message))}))}}return a.\u0275fac=function(o){return new(o||a)(e.Y36(g.F0),e.Y36(p.d),e.Y36(e.R0b),e.Y36(m.e),e.Y36(h.E),e.Y36(f.s))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-setup-profile"]],viewQuery:function(o,t){if(1&o&&(e.Gf(s.ki,5),e.Gf(P,5)),2&o){let i;e.iGM(i=e.CRH())&&(t.modal=i.first),e.iGM(i=e.CRH())&&(t.searchElementRef=i.first)}},standalone:!0,features:[e.jDz],decls:27,vars:7,consts:[[1,"background_content",3,"fullscreen"],[1,"container"],[1,"center","clr_heading","top_heading","sf_pro_display"],[2,"margin-top","20%"],[1,"input_lbl","clr_heading","sf_pro_display"],["type","text","inputmode","text","placeholder","First Name",1,"sf_pro_display","mgt_10",3,"ngModel","ngModelChange"],[1,"input_lbl","clr_heading","sf_pro_display","mgt_18"],["type","text","inputmode","text","placeholder","Last Name",1,"sf_pro_display","mgt_10",3,"ngModel","ngModelChange"],["type","tel","inputmode","tel","placeholder","Phone Number",1,"sf_pro_display","mgt_10",3,"ngModel","ngModelChange"],[1,"input_with_icon","pdr_18"],["type","search","inputmode","search","placeholder","Location",1,"sf_pro_display","c-input",3,"ngModel","keydown.enter","ngModelChange"],["search",""],["id","open-modal","src","../../assets/images/icons/location_icon.svg","alt",""],[3,"hidden"],["tappable","","style","--background: black; color: white",4,"ngFor","ngForOf"],["trigger","open-modal",1,"location_modal",3,"willDismiss"],["expand","block","size","large",1,"btn","sf_pro_display","btn_solid_primary",3,"click"],["tappable","",2,"--background","black","color","white"],[1,"background_content"],[1,"sub_container"],[1,"right"],["src","../../assets/images/icons/close.svg","alt","",3,"click"],[1,"sf_pro_display","font_18_700","center","clr_heading"],[1,"sf_pro_display","font_14_400","center","clr_text"],[1,"flex_center","space_between"],["fill","outline",1,"btn","width_47_per","sf_pro_display","btn_outline_primary"],[1,"btn","sf_pro_display","width_47_per","btn_solid_primary",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2),e._uU(3,"Setup Profile"),e.qZA(),e.TgZ(4,"div",3)(5,"div",4),e._uU(6,"First Name"),e.qZA(),e.TgZ(7,"ion-input",5),e.NdJ("ngModelChange",function(n){return t.firstname=n}),e.qZA(),e.TgZ(8,"div",6),e._uU(9,"Last Name"),e.qZA(),e.TgZ(10,"ion-input",7),e.NdJ("ngModelChange",function(n){return t.lastname=n}),e.qZA(),e.TgZ(11,"div",6),e._uU(12,"Phone Number"),e.qZA(),e.TgZ(13,"ion-input",8),e.NdJ("ngModelChange",function(n){return t.number=n}),e.qZA(),e.TgZ(14,"div",6),e._uU(15,"Location"),e.qZA(),e.TgZ(16,"div",9)(17,"input",10,11),e.NdJ("keydown.enter",function(n){return n.preventDefault()})("ngModelChange",function(n){return t.from=n}),e.qZA(),e._UZ(19,"img",12),e.qZA(),e.TgZ(20,"ion-list",13),e.YNc(21,v,2,1,"ion-item",14),e.qZA(),e.TgZ(22,"ion-modal",15),e.NdJ("willDismiss",function(n){return t.onWillDismiss(n)}),e.YNc(23,y,14,0,"ng-template"),e.qZA()(),e.TgZ(24,"div")(25,"ion-button",16),e.NdJ("click",function(){return t.saveProfile()}),e._uU(26,"Complete"),e.qZA()()()()),2&o&&(e.Q6J("fullscreen",!0),e.xp6(7),e.Q6J("ngModel",t.firstname),e.xp6(3),e.Q6J("ngModel",t.lastname),e.xp6(3),e.Q6J("ngModel",t.number),e.xp6(4),e.Q6J("ngModel",t.from),e.xp6(3),e.Q6J("hidden",t.listishiddenFrom),e.xp6(1),e.Q6J("ngForOf",t.autocompleteItems))},dependencies:[s.Pc,s.YG,s.W2,s.pK,s.Ie,s.q_,s.ki,s.j9,u.ez,u.sg,c.u5,c.Fj,c.JJ,c.On],styles:[".container[_ngcontent-%COMP%]{width:85%;margin:0% auto}.sub_container[_ngcontent-%COMP%]{padding:14px;height:245px;display:flex;flex-direction:column;justify-content:space-between}.c-input[_ngcontent-%COMP%]{border:none;background:none;box-shadow:none;height:50px;width:100%;padding-left:15px;outline:none;color:#404142}"]}),a})()}}]);